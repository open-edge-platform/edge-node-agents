mkdir -p /etc/rancher/rke2; echo -e "configs: null\nmirrors: {}" > /etc/rancher/rke2/registries.yaml; chmod 0640 /etc/rancher/rke2/registries.yaml; mkdir -p /var/lib/rancher/rke2/server/tls; echo -e "-----BEGIN CERTIFICATE-----\nMIIC6jCCAdKgAwIBAgIBADANBgkqhkiG9w0BAQsFADAVMRMwEQYDVQQDEwprdWJl\ncm5ldGVzMB4XDTI0MTIwNTIyMjYyMFoXDTM0MTIwMzIyMzEyMFowFTETMBEGA1UE\nAxMKa3ViZXJuZXRlczCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALVC\neT9BdtLe8Oji7+zlycrdbBvT2eAU3wON90kkGwqwBXDy9d+MvpVMjGXWjTLcq7AK\nwQ3EBBnQyyjjRCeIKJWCwb0ixUcXWlSOu3EJf07mVTwV1k1bAVOEWa8VL1/XLULB\nOI083yyqNnb08TAAdOmB4sfiz5hS2/jZHvLexI1VK3keMS+TrdQTntwu6a022siA\nc/pA4BAlFmLF7XPoqIwAzrJyZjQi81k8eF948CB4Hhifmhr1H+PETc8za6+jDUrk\nxFRzAyZf8Btbg8G9GzXNHvdEnENXkcjAoo5sdlzcWHAqnW6xPfsDxuR1ewIA7R85\nWaTg7AQwSEDwGMAaIo0CAwEAAaNFMEMwDgYDVR0PAQH/BAQDAgKkMBIGA1UdEwEB\n/wQIMAYBAf8CAQAwHQYDVR0OBBYEFMpRv8j5U0w3drpOFcpjb7HsGDJJMA0GCSqG\nSIb3DQEBCwUAA4IBAQA0/aSx9GxGNiigV7DrHeD9wJ1dwAtQEwDRaoKu9O92B6+w\nZrejoplMI9fE8eNrMBaEMpqq7skDn97p3P2mi/Biq14pITlOhOBc2K96C/NmmfSp\nmi/EzBDqBMqJxRbdzLAMz1fiyLv5BCEC/lHtKhEnu4ABEDGQ5SUlbX1NOKSw1GKr\n1XcG6UyYf+NBNXLuYsShzaQxytRpshydQDNYuZ4oKoAuKCm5lLjtR6/LQmrrkgSj\nCpELwlaosiKYg4lp8TQmuxasellp+cHMQISCSBQ9uDRGVRkSvOvIsSH2uGeYFCRX\nca8qgKaJE2TkKix2RzdfvnQtnsHlEGKvd4W5szsC\n-----END CERTIFICATE-----" > /var/lib/rancher/rke2/server/tls/server-ca.crt; chmod 0640 /var/lib/rancher/rke2/server/tls/server-ca.crt; mkdir -p /var/lib/rancher/rke2/server/tls; echo -e "-----BEGIN RSA PRIVATE KEY-----\nMIIEowIBAAKCAQEAtUJ5P0F20t7w6OLv7OXJyt1sG9PZ4BTfA433SSQbCrAFcPL1\n34y+lUyMZdaNMtyrsArBDcQEGdDLKONEJ4golYLBvSLFRxdaVI67cQl/TuZVPBXW\nTVsBU4RZrxUvX9ctQsE4jTzfLKo2dvTxMAB06YHix+LPmFLb+Nke8t7EjVUreR4x\nL5Ot1BOe3C7prTbayIBz+kDgECUWYsXtc+iojADOsnJmNCLzWTx4X3jwIHgeGJ+a\nGvUf48RNzzNrr6MNSuTEVHMDJl/wG1uDwb0bNc0e90ScQ1eRyMCijmx2XNxYcCqd\nbrE9+wPG5HV7AgDtHzlZpODsBDBIQPAYwBoijQIDAQABAoIBAH9PjDe4tEvSGOWK\nF7iNgVmCgh9dgkdYgXdOrGRr/q5YCcpWbAmzIl1c4bPZqV0TD2fbddNEXRkAxOEY\nF1Oo19CDga5lkKipJ2ICynbPk+KH90/3iojUpa7SY+eMerTXPswHSMAzBBGsEAsn\naYwslfE4sF9y2BqGAEjdv1YYz3bwL7AWN8E9qoAapUylGqbOVXwC/7Eq2Nac61yf\nVl+gVBYULEYeJp7j1qMOOcxQegZCwil0wM2KE6R8e1pdgo5JKdin3vAQVBnT9+/q\nfB585Xp5XGZ2jUQpyqUx9nK+mqg+nyNg3FWZPrCP8Or+RzwWX6mvpPcGuHkSzS5H\nJRhqfiUCgYEA1AyruIXFuqshiWtVPrHAZHLR5rUhsCM7ox02iQvLxHrPSMnN4XMe\nBpNJXz08RDC0DyV54UN4woD1lDPJHewthu9N4Y+y9yVOerq+EYlpFPaY/vKScx4L\n6xIx+ZTVjeFopax7aj2yDAnpG0UapUVYu6J+r+kCrHaBz+V8tMYRKlMCgYEA2tQY\nxt8nQHXINvr9Rr4rfIin1GUMFs6qGBrnw5SP0I+SIo0ukoeOOqVBJg47GfXpmJEx\nk+DrMVdwbmOZ4fBaUq0RBgR7rzRiLGUW8/VI3Ns7RbLCUuiJQEmgf2eUEGGM9kC5\nD+J3Ny6JyTAHoOU4Dwzenq9fj45rb7QBE/jKo58CgYEAm5KYQg7THLsFJd77cb3T\nm16qJQtrJeETlf6Ozkk7PHGlto9oXymoM8bHo/o3Rwg8cohaPSzVYk5e3laIDU4D\nsOXNS9mzwaM7SsvLOu6Hi/vID/REAfVfZR26UJQjga6IqlQ7T5zoDfEPdxRiEjMo\ngLEdJU5cyc9AOhjyP2a5nUUCgYBvbDO5f4LjBZYOuLoiPU6zOHoMYe9H5a8iWwDL\ny2d3EMOeKDkgjzlSjzafA/v/+gEZmESgQZRAKX+sFbcTHmk/U7QpVjsMOSYL6OVJ\nDwosusxxbtYXlSPdwh+g/8KanLFD6izQ88U0KdQqxvP7bvueXjU0o6OK2z/FPuiV\nnMbBjQKBgGs53mf5zuQwYzHFWnTk3o8MbXHbgao5bKyuoPypMhCp9fAuAB0tSZJR\nhCALuQ60zVFkLOC+9d0nQgEMCP42sPApylLPq7my1L1pBkwrBhKdi36it8nsyDuk\nHPHU62PRhazl0nyeYZOEwQJUObLruxduDzVLEk8mMGKHMDgUXQSA\n-----END RSA PRIVATE KEY-----" > /var/lib/rancher/rke2/server/tls/server-ca.key; chmod 0600 /var/lib/rancher/rke2/server/tls/server-ca.key; mkdir -p /var/lib/rancher/rke2/server/tls; echo -e "-----BEGIN CERTIFICATE-----\nMIIC6jCCAdKgAwIBAgIBADANBgkqhkiG9w0BAQsFADAVMRMwEQYDVQQDEwprdWJl\ncm5ldGVzMB4XDTI0MTIwNTIyMjYyMFoXDTM0MTIwMzIyMzEyMFowFTETMBEGA1UE\nAxMKa3ViZXJuZXRlczCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAKT/\nRXwUI8SSDyeTfop/crJ9dUzCs1/nkA3LDSYbAQ8q5GAWfwn1Ie8uXr5T5LEecYsA\neobtTSTjJXpd3WTi5yHODwItH4XC+xoekK8Xvn4AINGMBYX2/1vTUAcgqb7CRJO/\nbsGt1fuGQr2Eg+dt1h7RV84QKv2vu7qKBcfehyLxmRnWucF8UISsVruZB6UvBH3c\ncNRRmLmSgZSGf+Lw6QC0AT8/ZiMEoWpIDL4dzx62AvxQlxfAt4EEdzOUorblM1Fx\n/TjG3VCcamUP7FubdImAOmxPJ/OYYR43nTjOvi9txuD+0LIqAcm88oSVy4AH4TeL\nd2zKvtmriwDAFXnJOfcCAwEAAaNFMEMwDgYDVR0PAQH/BAQDAgKkMBIGA1UdEwEB\n/wQIMAYBAf8CAQAwHQYDVR0OBBYEFBP3ZgtODDGuxI51+KIi26Ve79DsMA0GCSqG\nSIb3DQEBCwUAA4IBAQCeCC+zbZuAADhkdhfdrPbgS6QKSi5ExZDFWTfdXAsIRTYI\nXkeEZk2Vvm8TXeDNoHvQYVDb+9qm9MMV65gHgrrwqo+EBQKe24zrqnJhIkxayU/m\nzEVknsKwB+rKA9F+iX3yzYxuGSjFRpaJZImwSGifRHebNpr+GbaAo4cQ9QD66kPn\neOFDqFlN6s/5rUQgqwvO9USg7ZSiCxP3Hkv9tCHobdYObNRbQ+AI9NdmjXJepZ0/\n2GE4AJq5ecUnsvcPXKqYTwCDctyPRJn9BaxCDsuPCgSSbJ0Fm8Ig+YhzwV4XHR6p\nQSlurAB74BTvVRI2A5cwBqjN2NqWo+h1MQDRfV31\n-----END CERTIFICATE-----" > /var/lib/rancher/rke2/server/tls/client-ca.crt; chmod 0640 /var/lib/rancher/rke2/server/tls/client-ca.crt; mkdir -p /var/lib/rancher/rke2/server/tls; echo -e "-----BEGIN RSA PRIVATE KEY-----\nMIIEowIBAAKCAQEApP9FfBQjxJIPJ5N+in9ysn11TMKzX+eQDcsNJhsBDyrkYBZ/\nCfUh7y5evlPksR5xiwB6hu1NJOMlel3dZOLnIc4PAi0fhcL7Gh6Qrxe+fgAg0YwF\nhfb/W9NQByCpvsJEk79uwa3V+4ZCvYSD523WHtFXzhAq/a+7uooFx96HIvGZGda5\nwXxQhKxWu5kHpS8Efdxw1FGYuZKBlIZ/4vDpALQBPz9mIwShakgMvh3PHrYC/FCX\nF8C3gQR3M5SituUzUXH9OMbdUJxqZQ/sW5t0iYA6bE8n85hhHjedOM6+L23G4P7Q\nsioBybzyhJXLgAfhN4t3bMq+2auLAMAVeck59wIDAQABAoIBAGK++6DUlMtx9mvj\nE9pjiAtWljsIUz3UYhw/J3Fku++N5fuzuvgEovh4Me+KWdW+uIlOEgZqQr8OykE/\np95XBajvn3/X7YOqO4lYPZLsjO7vuLRwLmYMeqtD/iMl4zDtJwmdifWTyfqsUYkG\no8J/s6Ph+cCzYGdPIvTy4Z7KiOnZ45cdF1ecCO4bq4VzfDMAnVir5ftQdKwNMtGk\nM+uxgRFp9xfFSmnZ/ILgmAELQylSL8c5Ro60hhVSZRHvRW/J4upTq3e7M+EPT9m5\npH2P8GU/GmtqQMM5cUCB9bB2/HNPEkCXkIwoW2c0GdUxYFhbrnmhTMY0OdAXSu+N\nZDJhS8ECgYEA0DWPI6SiEWGU5bDCV7+zL2+FGGlm1rrZDqdoNyptAZFvJ+7CtRsA\nNQMlyggMXESxsgb44KWhp4gwTwnk1qHXJ+LOBY3SftwY8HFHxNZBkAOkT3TToh0C\n4NT8Ys6LY0SK/Grpm61zmc7a10VJgTmmfyWwLnwHudl2td3TwBL9OPECgYEAyt6O\nvX3i3yn0OX2db1rR5PKAjWHoL68BThHRtncvKo1Ckv6pqTe2r2PMQXkz3tRlFzY2\nsBADpOD55KVba8AoHysVL2zGQ+AsosqI633AP6Ggwn8K+I8thhG7OGpCOf5g5PZ+\nx5OK2SJSgbzvE0R8xxyF6Of7qQi11mkB5niUYWcCgYA17dmAgvETjXHyuIDuF5JC\n9CDGPO7NKaJ1IDlnKI8Je/ENp9M486BvGrycAs+oyoY4NYQbM+uWKDlTD539VfgT\ntbRlTeG6yCmRhdXwDwr2UWsqxXjXoaoQMDqbISKLeMKDNPIDR78MlL6sSZ8LYLJW\ndp2WvLuHkOMloippssFyEQKBgQCJgHe3MBAJumHyZZXD2AbT6xn+uhGp4DA+Pg2q\nYvXxHXW2NC3CqCSGlFnpNsFVkxhBt1kx1Gjj5Cj8NKfWTJPlLEpbrppjfxpB7I0J\nMF6Rwnc33OwOtNziNjpzbnIc5LG//uLHWtWNfpn1nZ1drdn1CvwodLQ6SdEV1m6X\nS7smmQKBgApZZ2glJA6al9/4DEfYkgwCqNtyZaEgVPXqIH2Qo0hGWjafCPj6DWdN\nNbkZeiwHb9jwuZUzSF4jWe/BurzOuh9xpqLFRT2b6dO7khE6Dq22dyOvu9eOK9TW\nQYXbJvGMwiTg7gSDg96ifiVpNu02fK/H337VO+Xc6kwjHNKBU19A\n-----END RSA PRIVATE KEY-----" > /var/lib/rancher/rke2/server/tls/client-ca.key; chmod 0600 /var/lib/rancher/rke2/server/tls/client-ca.key; curl -sfL https://get.rke2.io | INSTALL_RKE2_VERSION=v1.30.6+rke2r1 sh -s - server; systemctl enable rke2-server.service; systemctl start rke2-server.service; mkdir -p /run/cluster-api; echo success > /run/cluster-api/bootstrap-success.complete 
